<div class="container mt-3">
  <div class="card">
    <div class="card-header">
      Details
    </div>
    <div class="card-body">
      <form>
        <div class="row">
          <div style="max-width: 313px;" class="col mb-2">
            <small class="form-text text-muted">Click Image to upload Avatar</small>
            <img class="img-fluid" (click)="fileInput.click()" [src]=getSanitizedUrl()>
            <input style="display: none" type="file" (change)="onFileChanged($event)" #fileInput>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <small class="form-text text-muted">Name</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.name" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Name">
          </div>
          <div class="col">
            <small class="form-text text-muted">Gender</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.gender" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Gender">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <small class="form-text text-muted">Concept</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.concept" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Concept">
          </div>
          <div class="col">
            <small class="form-text text-muted">Nationality</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.nationality" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Nationality">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <small class="form-text text-muted">Rank</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.rank" [ngModelOptions]="{standalone: true}" type="text" class="form-control"
              placeholder="Enter Rank">
          </div>
          <div class="col">
            <small class="form-text text-muted">Experience</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.experience" [ngModelOptions]="{standalone: true}" type="text" class="form-control"
              placeholder="Enter Experience">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <small class="form-text text-muted">Faction</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.faction" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Faction">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <small class="form-text text-muted">Loge</small>
            <input (keyup)="onFormChange()" [(ngModel)]="this.hero.details.loge" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Loge">
          </div>
        </div>
        <div class="row">
          <div class="col">
            <small class="form-text text-muted">Status</small>
            <div [formGroup]="heroStateFormGroup">
              <div class="btn-group btn-group-toggle" ngbRadioGroup formControlName="model">
                <label ngbButtonLabel [ngClass]="ifClassIsActive(1)" class="btn-secondary pl-3 pr-3">
                  <input (change)="onHeroStateFormGroupChange()" ngbButton type="radio" [value]=1>1
                </label>
                <label ngbButtonLabel [ngClass]="ifClassIsActive(2)" class="btn-secondary pl-3 pr-3">
                  <input (change)="onHeroStateFormGroupChange()" ngbButton type="radio" [value]=2>2
                </label>
                <label ngbButtonLabel [ngClass]="ifClassIsActive(3)" class="btn-secondary pl-3 pr-3">
                  <input (change)="onHeroStateFormGroupChange()" ngbButton type="radio" [value]=3>3
                </label>
                <label ngbButtonLabel [ngClass]="ifClassIsActive(4)" class="btn-secondary pl-3 pr-3">
                  <input (change)="onHeroStateFormGroupChange()" ngbButton type="radio" [value]=4>4
                </label>
                <label ngbButtonLabel [ngClass]="ifClassIsActive(5)" class="btn-secondary pl-3 pr-3">
                  <input (change)="onHeroStateFormGroupChange()" ngbButton type="radio" [value]=5>5
                </label>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="card mt-3">
    <div class="card-header">
      Attributes<span (click)="addNewAttribute()" class="float-right"><i style="font-size:24px;" class="fas fa-plus-circle text-success"></i></span>
    </div>
    <div class="card-body">
      <form>
        <div *ngIf="this.hero.attributes.attributes.length == 0">
          Click plus sign to add an Attribute
        </div>
        <div *ngFor="let attribute of this.hero.attributes.attributes; let i=index" class="row">
          <div class="col-4">
            <small class="form-text text-muted">Attribute</small>
            <input (keyup)="onFormChange()" [(ngModel)]="attribute.name" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Attribute">
          </div>
          <div class="col-3">
            <small class="form-text text-muted">Level</small>
            <div ngbDropdown>
              <button class="btn btn-outline-primary" id="dropdownAttribute" ngbDropdownToggle>
                <span *ngIf="attribute.level.length == 0; else displayLevel">Dice</span>
                <ng-template #displayLevel>{{ attribute.level }}</ng-template>
              </button>
              <div ngbDropdownMenu aria-labelledby="dropdownAttribute">
                <button *ngFor="let level of this.hero.attributes.available_level" (click)="changeAttributeLevel(i, level)" class="dropdown-item">{{ level }}</button>
              </div>
            </div>
          </div>
          <div class="col-3">
            <small class="form-text text-muted">Modifier</small>
            <input (keyup)="onFormChange()" [(ngModel)]="attribute.modifier" [ngModelOptions]="{standalone: true}" type="text" class="form-control" placeholder="Enter Modifier">
          </div>
          <div class="col-2">
            <small class="form-text text-muted">Delete</small>
            <button type="button" (click)="removeAttribute(i)" class="btn btn-danger"><i class="fas fa-ban"></i></button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
